# AI-Powered Discord Chatbot
This AI-powered chatbot uses discord.js and the LM Studio sdk to allow a Large Language Model to communicate with users on Discord.

To run this project, you will need to have Node.js installed on your machine. You can download it from the official website: https://nodejs.org/en/download/

Additionally you will need to install the necessary dependencies by running the following command in your terminal:
```
npm install
```

## Configuration
To configure the bot, you will need to create a .env file in the root directory of the project and add the following environment variables:
```
APP_ID=your-discord-app-id
DISCORD_TOKEN=your-discord-bot-token
SERVER_ID=your-development-server-id
AI_MODEL=AI-model-api-identifier-from-LMStudio-developer-tab
SYSTEM_PROMPT="optional-prompt-to-determine-AI-goals-and-personality" (optional)
KEYWORDS=optional, list, of, keywords, to, trigger, bot (optional)
PROMPT_EVASION_DETECTION=true/false (optional)
PROMPT_EVASION_DETECTION_MESSAGE=Nice try. (optional)
BOT_DETECTION=true/false (optional)
BOT_DETECTION_MESSAGE=I am not a bot! (optional)
```
You can find your Discord bot token and app ID by following these steps:
 1. Go to the Discord Developer Portal: https://discord.com/developers/applications
 2. Click on the "New Application" button.
 3. Give your application a name and click on the "Create" button.
 4. Click on the "Bot" tab on the left-hand side of the page.
 5. Click on the "Add Bot" button.
 6. Click on the "Copy" button next to the "Token" field.
 7. Paste the token into the .env file as the value of the DISCORD_TOKEN environment variable.
 8. Navigate to your bot's General Information tab
 9. Copy the Application ID and paste it into the .env file as the value of the APP_ID environment variable.

You can find your Discord server's ID by right clicking on the server's name and clicking copy ID. You will need developer mode to be on in Discord's settings under App Settings/Advanced.

You will also need to install LM Studio and create a model. You can get LM Studio here: https://lmstudio.ai/

In LM Studio you can find and download models using the Discover tab. Once LM Studio is set up follow these steps:
1. Ensure you are in Developer mode.
2. Run the server from the Developer tab.
3. Select a model to load.
4. Copy the model name from the loaded model or the info side panel and paste it into .env file as the value of the AI_MODEL environment variable.

The code is designed to work with Deepseek Coder V2, but any other model can be used if you copy their name from LM Studio's Developer tab to the relevant area in the Initialize LMStudio client part of message.js.

## Deployment
Once you have installed the dependencies, you can deploy the commands by running:
```
node deploy-commands
```
By default the commands will deploy to one server, as this is quicker. The server will be defined in your .env file. See Configuration for more information.

To deploy commands globally, run this command instead:
```
node deploy-commands --global
```
Or:
```
node deploy-commands -G
```
It can take up to an hour or more for global commands to appear in Discord.

There are three arguments the deploy-commands script can be run with:
```
-g / --guild //Force deploys to guild
-G / --global //Force deploys globally
-p / --preserve //Preserves previously existing scripts, useful for keeping guild commands while deploying globally
```

Once the commands are deployed, run the bot with:
```
node index.js
```

## Usage
Once the bot is running, you can interact with it by sending messages in a Discord channel that the bot has access to. The bot will respond to your messages with a response generated by the LM Studio model.

# Elite Dangerous / Inara API Integration

This bot includes a `/elite_community_goals` command that fetches current community goals from the Elite Dangerous universe using the Inara API.

## Setting Up Inara API Access

To use this feature, you'll need to register for API access on the Inara website:

1. Create an account on [Inara](https://inara.cz/) if you don't already have one
2. Apply for API access through their developer portal and carefully follow the API dev instructions
3. Once approved, you'll receive an API key and your app will be whitelisted

## Configuration

Add the following variables to your `.env` file:
```
INARA_APP_NAME=App name you gave to Inara creator
INARA_APP_VERSION=Version of your application
INARA_API_KEY=inara-api-key
INARA_COMMANDER_NAME=elite-dangerous-username
INARA_COMMANDER_FRONTIER_ID=frontierID
```

## Usage

Once configured, users can use the `/elite_community_goals` command in Discord to see active community goals in Elite Dangerous. The command displays:

- Goal names and locations
- Time remaining
- Objective descriptions
- Progress information
- Average contribution amount

The data is cached for 4 hours to prevent excessive API requests.